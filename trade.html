<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <title>CryptoMuse</title>
    <meta name="viewport" content="width=device-width, initial-scale=1, minimum-scale=1, maximum-scale=1, shrink-to-fit=no" >
    <link rel="shortcut icon" href="img/favicon.ico" type="image/x-icon">
    <link href="https://fonts.googleapis.com/icon?family=Material+Icons" rel="stylesheet">
    <link rel="preconnect" href="https://fonts.googleapis.com"><link rel="preconnect" href="https://fonts.gstatic.com" crossorigin><link href="https://fonts.googleapis.com/css2?family=Montserrat:ital,wght@0,100;0,200;0,300;0,400;0,500;0,600;0,700;0,800;0,900;1,100;1,200;1,300;1,400;1,500;1,600;1,700;1,800;1,900&display=swap" rel="stylesheet">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/normalize/5.0.0/normalize.min.css">
    <link rel='stylesheet' href='https://cdnjs.cloudflare.com/ajax/libs/Swiper/4.0.7/css/swiper.min.css'>
    <link rel="stylesheet" href="https://unpkg.com/aos@next/dist/aos.css"/>
    <link rel="stylesheet" href="css/style.css">
    <link rel="stylesheet" href="css/rwd.css">
    <script src="js/jquery-3.6.3.js"></script>
    <style>
        h1 {
    font-size: 1.5em;
  }
  
  h2 {
    font-size: 1.25em;
  }
  
  h1,
  h2,
  p {

    color: #303030;
  }
  


  .cards {
    width: 90%;
    display: inline-flex;
    flex-direction: row;
    justify-content: space-between;
    flex-wrap: wrap;
    padding-top: 30px;
    padding-bottom: 30px;
  }
  
  .btc,
  .cosmos,
  .ethereum {
    display: grid;
    max-width: 300px;
    min-width: 250px;
    grid-template-columns: 1fr;
    grid-template-rows: minmax(50px, 60px) 1fr;
    grid-template: "info" "chart";
    border-radius: 30px;
  }
  
  .btc {
    box-shadow: 10px 10px 20px 1px rgba(247, 147, 26, 0.15);
  }
  
  .cosmos {
    box-shadow: 10px 10px 20px 1px rgba(46, 49, 72, 0.15);
  }
  
  .ethereum {
    box-shadow: 10px 10px 20px 1px rgba(78, 56, 216, 0.15);
  }
  
  .asset-info {
    grid-area: info;
    display: inline-flex;
    justify-content: space-between;
    align-items: center;
    padding: 0 5% 0 5%;
  }
  
  .title {
    display: inline-flex;
  }
  
  .card h1 {
    margin-left: 10px;
  }
  
  #btcChart,
  #cosmosChart,
  #ethereumChart {
    grid-area: chart;
    border-radius: 0px 0px 30px 30px;
    margin-top: auto;
  }
    </style>  
</head>
<body id="body" class="light">
    <!-- Header -->
    <header>
      <div class="toper light">
          <a href="index.html"><img id="logo" src="img/Logo.svg" alt=""></a>
          <div class="nav light">
              <ul>
                  <li><a class="a light" href="trade.html">Trade</a></li>
                  <li><a class="a light" href="farm.html">Earn</a></li>
                  <li><a class="a light" href="nftMarketing.html">NFT</a></li>
                  <li><a class="a light" href="#">Win</a></li>
                  <li><a class="a light" href="#">More</a></li>
              </ul>
          </div>
          <button type="button" id="switch" class="switch light">
              <label class="mode" for="switch">
                  <span id="switchIcon" class="material-icons">wb_sunny</span>
              </label>
          </button> 
          <button id="connectBtnId" type="button" class="connectBtn light">CONNECT WALLET</button>
          <div class="walletBtn-box light">
              <div class="walletBtn-box_address" tabindex="1">
                  <p class="walletBtn-box-text">Cream</p>
                  <img class="walletBtn-box_icon" src="img/arrow_icon.svg" alt="Arrow Icon"/>
                  <!-- <div class="walletBtn-box_icon light" alt="Arrow Icon">
                      <span class="material-icons">keyboard_arrow_down</span>
                  </div> -->          
              </div>
              <ul class="walletMenu_list light">
                <li>
                  <label class="walletMenu" for="0" aria-hidden="aria-hidden">Wallet</label>
                </li>
                <li>
                  <label class="walletMenu" for="1" aria-hidden="aria-hidden">Recent Transactions</label>
                </li>
                <li>
                  <label class="walletMenu" for="2" aria-hidden="aria-hidden">Your NFTs</label>
                </li>
                <li>
                  <label class="walletMenu" for="3" aria-hidden="aria-hidden">Your Profile</label>
                </li>
                <li>
                  <label class="walletMenu" for="4" aria-hidden="aria-hidden" onclick="disconnect();">Disconnect</label>
                </li>
              </ul>
            </div>
      </div>
  </header>

    <!-- ===================================subMenu======================================= -->

    <div class="nftMenu light">
        <ul>
            <li><a class="back light" href="nftProduct_FTLTALAML.html">&#060; Back to FTLTALAML</a></li>
        </ul>
    </div>

    <div class="wrapperTrade">

        <div class="container">
            <cards class="cards">
                <cakecoin style="width: 30%" class="btc">
                    <card class="asset-info">
                        <div class="title">
                            <img src="https://s3.us-east-2.amazonaws.com/nomics-api/static/images/currencies/cake.svg" width="15%"> 
                            <h1>Cake</h1>
                        </div>
                        <div class="details">
                            <h2 class="asset-price" id="cakePrice"></h2>
                        </div>
                    </card>
                    <canvas id="cakeChart"></canvas>
                </cakecoin>


                <bitcoin style="width: 30%" class="btc">
                    <card class="asset-info">
                        <div class="title">
                            <img src="https://s3.us-east-2.amazonaws.com/nomics-api/static/images/currencies/btc.svg" width="15%"> 
                            <h1>Bitcoin</h1>
                        </div>
                        <div class="details">
                            <h2 class="asset-price" id="btcPrice"></h2>
                        </div>
                    </card>
                    <canvas id="btcChart"></canvas>
                </bitcoin>
        
                <cosmos style="width: 30%" class="cosmos">
                    <card class="asset-info">
                        <div class="title">
                            <img src="https://s3.us-east-2.amazonaws.com/nomics-api/static/images/currencies/atm.svg" width="15%"> 
                            <h1>Cosmos</h1>
                        </div>
                        <div class="details">
                            <h2 class="asset-price" id="atomPrice"></h2>
                        </div>
                    </card>
                    <canvas id="cosmosChart"></canvas>
                </cosmos>
        
                <ethereum style="width: 30%" class="ethereum">
                    <card class="asset-info">
                        <div class="title">
                            <img src="https://s3.us-east-2.amazonaws.com/nomics-api/static/images/currencies/eth.svg" width="10%"> 
                            <h1>Ethereum</h1>
                        </div>
                        <div class="details">
                            <h2 class="asset-price" id="ethPrice"></h2>
                        </div>
                    </card>
                    <canvas id="ethereumChart"></canvas>
                </ethereum>
            </cards>
        </div>
    </div>

    <!-- =================================footer======================================= -->

    <div class="footer light">
        <div class="wrapper_9">
            <img class="logo" src="img/Logo.svg" alt="">
            <div class="list">
                <div class="about">
                    <!-- <p>About</p> -->
                    <ul>
                        <li>About</li>
                        <li>Contact</li>
                        <li>Brand</li>
                        <li>Blog</li>
                        <li>Community</li>
                        <li>Litepaper</li>
                    </ul>
                </div>
                <div class="help">
                    <ul>
                        <li>Customer Support</li>
                        <li>Troubleshooting</li>
                        <li>Guides</li>
                    </ul>
                </div>
                <div class="Company">
                    <ul>
                        <li>Github</li>
                        <li>Documentation</li>
                        <li>Bug Bounty</li>
                        <li>Audits</li>
                        <li>Careers</li>
                    </ul>
                </div>
            </div>
            <div class="socialMedia">
                <ul>
                    <li>
                        <img src="img/socialMedia/Twitter.svg" alt="">
                    </li>
                    <li>
                        <img src="img/socialMedia/Telegram.svg" alt="">
                    </li>
                    <li>
                        <img src="img/socialMedia/Reddit.svg" alt="">
                    </li>
                    <li>
                        <img src="img/socialMedia/GitHub.svg" alt="">
                    </li>
                    <li>
                        <img src="img/socialMedia/Discord.svg" alt="">
                    </li>
                    <li>
                        <img src="img/socialMedia/Medium.svg" alt="">
                    </li>
                    <li>
                        <img src="img/socialMedia/Youtube.svg" alt="">
                    </li>
                </ul>
            </div>
        </div>
    </div>

     <!-- ===================================tibame======================================= -->

    <div class="tibame">
        <p>本網站為緯育TibaMe前端工程師班第82期學員專題作品，本平台僅供學習、展示之用。</p>
        <p>參考資源：PancakeSwup, templatemonster</p>
    </div>


 

    <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
    <script src='https://cdnjs.cloudflare.com/ajax/libs/Swiper/4.0.7/js/swiper.min.js'></script>
    <script src="https://unpkg.com/aos@next/dist/aos.js"></script>
    <script src="https://widgets.coingecko.com/coingecko-coin-price-chart-widget.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/Chart.js/2.8.0/Chart.bundle.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/web3@latest/dist/web3.min.js"></script>
    <script  src="js/script.js"></script>
    <script>
        ///  Calling API and modeling data for each chart ///

const cakeData = async () => {
  const response = await fetch('https://min-api.cryptocompare.com/data/v2/histominute?fsym=CAKE&tsym=USD&limit=119&api_key=0646cc7b8a4d4b54926c74e0b20253b57fd4ee406df79b3d57d5439874960146');
  const json = await response.json();
  const data = json.Data.Data
  const times = data.map(obj => obj.time)
  const prices = data.map(obj => obj.high)
  return {
    times,
    prices
  }
}


const btcData = async () => {
  const response = await fetch('https://min-api.cryptocompare.com/data/v2/histominute?fsym=BTC&tsym=USD&limit=119&api_key=0646cc7b8a4d4b54926c74e0b20253b57fd4ee406df79b3d57d5439874960146');
  const json = await response.json();
  const data = json.Data.Data
  const times = data.map(obj => obj.time)
  const prices = data.map(obj => obj.high)
  return {
    times,
    prices
  }
}


const cosmosData = async () => {
  const response = await fetch('https://min-api.cryptocompare.com/data/v2/histominute?fsym=ATOM&tsym=USD&limit=119&api_key=0646cc7b8a4d4b54926c74e0b20253b57fd4ee406df79b3d57d5439874960146');
  const json = await response.json();
  const data = json.Data.Data
  const times = data.map(obj => obj.time)
  const prices = data.map(obj => obj.high)
  return {
    times,
    prices
  }
}


const ethereumData = async () => {
  const response = await fetch('https://min-api.cryptocompare.com/data/v2/histominute?fsym=ETH&tsym=USD&limit=119&api_key=0646cc7b8a4d4b54926c74e0b20253b57fd4ee406df79b3d57d5439874960146');
  const json = await response.json();
  const data = json.Data.Data
  const times = data.map(obj => obj.time)
  const prices = data.map(obj => obj.high)
  return {
    times,
    prices
  }
}


/// Error handling ///
function checkStatus(response) {
  if (response.ok) {
    return Promise.resolve(response);
  } else {
    return Promise.reject(new Error(response.statusText));
  }
}



/// Charts ///
let createCakeChart

let createBtcChart
let createCosmosChart
let createethereumChart

async function printCakeChart() {
  let { times, prices } = await cakeData()

  let btcChart = document.getElementById('cakeChart').getContext('2d');

  let gradient = btcChart.createLinearGradient(0, 0, 0, 400);

  gradient.addColorStop(0, 'rgba(247,147,26,.5)');
  gradient.addColorStop(.425, 'rgba(255,193,119,0)');

/*   Chart.defaults.global.defaultFontFamily = 'Red Hat Text';
  Chart.defaults.global.defaultFontSize = 12; */

  createCakeChart = new Chart(cakeChart, {
    type: 'line',
    data: {
      labels: times,
      datasets: [{
        label: '$',
        data: prices,
        backgroundColor: gradient,
        borderColor: 'rgba(247,147,26,1)',
        borderJoinStyle: 'round',
        borderCapStyle: 'round',
        borderWidth: 3,
        pointRadius: 0,
        pointHitRadius: 10,
        lineTension: .2,
      }]
    },

    options: {
      title: {
        display: false,
        text: 'Heckin Chart!',
        fontSize: 35
      },

      legend: {
        display: false
      },

      layout: {
        padding: {
          left: 0,
          right: 0,
          top: 0,
          bottom: 0
        }
      },

      scales: {
        xAxes: [{
          display: false,
          gridLines: {}
        }],
        yAxes: [{
          display: true,
          gridLines: {}
        }]
      },

      tooltips: {
        callbacks: {
          //This removes the tooltip title
          title: function() {}
       },
        //this removes legend color
        displayColors: false,
        yPadding: 10,
        xPadding: 10,
        position: 'nearest',
        caretSize: 10,
        backgroundColor: 'rgba(255,255,255,.9)',
        bodyFontSize: 15,
        bodyFontColor: '#303030' 
      }
    }
  });
}



async function printBtcChart() {
  let { times, prices } = await btcData()

  let btcChart = document.getElementById('btcChart').getContext('2d');

  let gradient = btcChart.createLinearGradient(0, 0, 0, 400);

  gradient.addColorStop(0, 'rgba(247,147,26,.5)');
  gradient.addColorStop(.425, 'rgba(255,193,119,0)');

/*   Chart.defaults.global.defaultFontFamily = 'Red Hat Text';
  Chart.defaults.global.defaultFontSize = 12; */

  createBtcChart = new Chart(btcChart, {
    type: 'line',
    data: {
      labels: times,
      datasets: [{
        label: '$',
        data: prices,
        backgroundColor: gradient,
        borderColor: 'rgba(247,147,26,1)',
        borderJoinStyle: 'round',
        borderCapStyle: 'round',
        borderWidth: 3,
        pointRadius: 0,
        pointHitRadius: 10,
        lineTension: .2,
      }]
    },

    options: {
      title: {
        display: false,
        text: 'Heckin Chart!',
        fontSize: 35
      },

      legend: {
        display: false
      },

      layout: {
        padding: {
          left: 0,
          right: 0,
          top: 0,
          bottom: 0
        }
      },

      scales: {
        xAxes: [{
          display: false,
          gridLines: {}
        }],
        yAxes: [{
          display: true,
          gridLines: {}
        }]
      },

      tooltips: {
        callbacks: {
          //This removes the tooltip title
          title: function() {}
       },
        //this removes legend color
        displayColors: false,
        yPadding: 10,
        xPadding: 10,
        position: 'nearest',
        caretSize: 10,
        backgroundColor: 'rgba(255,255,255,.9)',
        bodyFontSize: 15,
        bodyFontColor: '#303030' 
      }
    }
  });
}



async function printCosmosChart() {
  let { times, prices } = await cosmosData()

  let cosmosChart = document.getElementById('cosmosChart').getContext('2d');

  let gradient = cosmosChart.createLinearGradient(0, 0, 0, 400);

  gradient.addColorStop(0, 'rgba(27,30,54,.5)');
  gradient.addColorStop(.425, 'rgba(46,49,72,0)');

  Chart.defaults.global.defaultFontFamily = 'Red Hat Text';
  Chart.defaults.global.defaultFontSize = 12;

  createCosmosChart = new Chart(cosmosChart, {
    type: 'line',
    data: {
      labels: times,
      datasets: [{
        label: "",
        data: prices,
        backgroundColor: gradient,
        borderColor: 'rgba(46,49,72,1)',
        borderJoinStyle: 'round',
        borderCapStyle: 'round',
        borderWidth: 3,
        pointRadius: 0,
        pointHitRadius: 10,
        lineTension: .2,
      }]
    },

    options: {
      title: {
        display: false,
        text: 'Heckin Chart!',
        fontSize: 35
      },

      legend: {
        display: false
      },

      layout: {
        padding: {
          left: 0,
          right: 0,
          top: 0,
          bottom: 0
        }
      },

      scales: {
        xAxes: [{
          display: false,
          gridLines: {}
        }],
        yAxes: [{
          display: false,
          gridLines: {}
        }]
      },

      tooltips: {
        callbacks: {
          //This removes the tooltip title
          title: function() {}
       },
        //this removes legend color
        displayColors: false,
        yPadding: 10,
        xPadding: 10,
        position: 'nearest',
        caretSize: 10,
        backgroundColor: 'rgba(255,255,255,.9)',
        bodyFontSize: 15,
        bodyFontColor: '#303030' 
      }
    }
  });
}


async function printEthereumChart() {
  let { times, prices } = await ethereumData()

  let ethereumChart = document.getElementById('ethereumChart').getContext('2d');

  let gradient = ethereumChart.createLinearGradient(0, 0, 0, 400);

  gradient.addColorStop(0, 'rgba(78,56,216,.5)');
  gradient.addColorStop(.425, 'rgba(118,106,192,0)');

  Chart.defaults.global.defaultFontFamily = 'Red Hat Text';
  Chart.defaults.global.defaultFontSize = 12;

  createEthereumChart = new Chart(ethereumChart, {
    type: 'line',
    data: {
      labels: times,
      datasets: [{
        label: '$',
        data: prices,
        backgroundColor: gradient,
        borderColor: 'rgba(118,106,192,1)',
        borderJoinStyle: 'round',
        borderCapStyle: 'round',
        borderWidth: 3,
        pointRadius: 0,
        pointHitRadius: 10,
        lineTension: .2,
      }]
    },

    options: {
      title: {
        display: false,
        text: 'Heckin Chart!',
        fontSize: 35
      },

      legend: {
        display: false
      },

      layout: {
        padding: {
          left: 0,
          right: 0,
          top: 0,
          bottom: 0
        }
      },

      scales: {
        xAxes: [{
          display: false,
          gridLines: {}
        }],
        yAxes: [{
          display: false,
          gridLines: {}
        }]
      },

      tooltips: {
        callbacks: {
          //This removes the tooltip title
          title: function() {}
       },
        //this removes legend color
        displayColors: false,
        yPadding: 10,
        xPadding: 10,
        position: 'nearest',
        caretSize: 10,
        backgroundColor: 'rgba(255,255,255,.9)',
        bodyFontSize: 15,
        bodyFontColor: '#303030' 
      }
    }
  });
}


/// Update current price ///
async function updateCakePrice() {
  let { times, prices } = await cakeData()
  let currentPrice = prices[prices.length-1].toFixed(2);

  document.getElementById("cakePrice").innerHTML = "$" + currentPrice;
}

async function updateEthereumPrice() {
  let { times, prices } = await ethereumData()
  let currentPrice = prices[prices.length-1].toFixed(2);

  document.getElementById("ethPrice").innerHTML = "$" + currentPrice;
}

async function updateCosmosPrice() {
  let { times, prices } = await cosmosData()
  let currentPrice = prices[prices.length-1].toFixed(2);

  document.getElementById("atomPrice").innerHTML = "$" + currentPrice;
}

async function updateBitcoinPrice() {
  let { times, prices } = await btcData()
  let currentPrice = prices[prices.length-1].toFixed(2);

  document.getElementById("btcPrice").innerHTML = "$" + currentPrice;
}


updateCakePrice()
updateEthereumPrice()
updateCosmosPrice()
updateBitcoinPrice()


printCakeChart()
printBtcChart()
printCosmosChart()
printEthereumChart()
    </script>
</body>
</html>